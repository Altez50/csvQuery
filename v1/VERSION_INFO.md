# Система автоматического версионирования

Этот проект включает автоматическую систему указания даты последнего изменения кодовой базы в заголовке приложения и имени исполняемого файла.

## Компоненты системы

### 1. version_info.py
Модуль для получения даты последнего изменения кодовой базы:
- Сначала пытается получить дату последнего коммита Git
- Если Git недоступен, использует дату изменения файлов проекта
- Возвращает дату в формате "YYYY-MM-DD HH:MM"

### 2. Заголовок главного окна
В `ui_mainwindow.py` заголовок окна автоматически включает версию с датой:
```
CSV Query Tool (PyQt5) - v1.0 (обновлено: 2025-08-08 00:56)
```

### 3. Диалог "О программе"
Также отображает версию с датой последнего изменения.

### 4. Автоматическое именование при сборке

#### build.cmd (обновленный)
Стандартный скрипт сборки теперь создает исполняемый файл с датой в имени:
```
csvQuery_2025-08-08_00-56.exe
```

#### build_with_cleanup.cmd (новый)
Расширенный скрипт сборки с дополнительными возможностями:
- Автоматически удаляет старые версии исполняемых файлов
- Показывает список созданных файлов после сборки
- Включает все функции обычного build.cmd

## Использование

### Обычная сборка
```cmd
.\build.cmd
```

### Сборка с очисткой старых версий
```cmd
.\build_with_cleanup.cmd
```

### Получение версии программно
```python
from version_info import get_version_string, get_last_modification_date

# Полная строка версии
version = get_version_string()  # "v1.0 (обновлено: 2025-08-08 00:56)"

# Только дата
date = get_last_modification_date()  # "2025-08-08 00:56"
```

## Преимущества

1. **Автоматическое отслеживание изменений** - не нужно вручную обновлять версию
2. **Уникальные имена файлов** - каждая сборка имеет уникальное имя с датой
3. **Информативность** - пользователи видят, когда была последняя версия
4. **Совместимость** - работает как с Git, так и без него
5. **Простота использования** - не требует изменения рабочего процесса

## Формат даты в имени файла

Дата в имени файла преобразуется для совместимости с файловой системой:
- Пробелы заменяются на подчеркивания: `_`
- Двоеточия заменяются на дефисы: `-`
- Пример: `2025-08-08 00:56` → `2025-08-08_00-56`