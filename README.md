# csvQuery

## Основные возможности

- **Редактирование таблиц**
  - Как в экселе, но перетаскивание ПКМ,
  - Заполнение через SQL join, Python Lookup() при добавлении колонки
  - Настройка видимых колонок

- **Группировка, сортировка, фильтры с регулярками, отбор строк с debounce**
  - Контекстное меню: "Сгруппировать по значению в колонке"
  - Вложенная группировка (GroupBy → GroupBy)
  - Экспорт сгруппированных данных в CSV/Excel

- **Раскраска таблицы**
  - "Повторяющиеся значения": одинаковые значения в колонке выделяются цветом
  - "Переходы между значениями": переходы между разными значениями выделяются цветом текста

- **Импорт/экспорт**
  - Помещение содержимого QTableWidget в SQLite-таблицу с выбором имени
  - Импорт из CSV, Excel/ODS
  - Экспорт в CSV/Excel (с выбором колонок)
  - Копирование выделенного в буфер обмена

- **Редактирование и Выполнение SQL-запросов**
  - Поддержка in-memory и файловых SQLite-баз
  - Конструктор, редактор параметров, подсветка синтаксиса, автодополнение, настройка шрифта и цветовой схемы
  - Просмотр нескольких результатов
  - Автоматическое сохранение запроса в историю при выполнении
  - Язык 1с переводится на sqlite и обратно, где возможно

- **История запросов и дерево сниппетов**
  - Группы, drag-and-drop

- **АИ**
  - Пишем промт, выполняем код, видим обработанный датасет не касаясь мышки

- **Внешний редактор**
  - Кнопка "Следить за изменениями" (в контекстном меню редактора)
  - Слежение за изменениями файла, автоматическое обновление текста
  - Настраиваемый путь к редактору (по умолчанию VSCode, авто-поиск code.exe)





- **Горячие клавиши**
  - F7 — выполнить запрос
  - Ctrl +/-, NumPad +/-, контекстное меню — добавить/удалить строку или столбец
  - Ctrl+F, Ctrl+H, Ctrl+G — поиск, замена, переход к строке
  - Переключение F1-F4: Режимы редактирования CSV/SQL/Python/AI**
---

## Улучшения и интеграции

- Поддержка drag-and-drop и редактирования дерева истории
- Автоматическое создание групп и запросов при необходимости
- Forward fill для группировки по значениям
- Безопасная работа с in-memory и файловыми базами
- Совместимость с Windows (поиск VSCode, работа с путями)

---

_Этот файл обновляется по мере появления новых функций и улучшений._ 

- Добавлен хоткей Ctrl+/ для комментирования и раскомментирования выделенных строк или текущей строки в редакторе SQL (добавляет/убирает -- в начале строки).
- Добавлен хоткей Ctrl+\ для установки или снятия символа | в начале строки (или выделения) в редакторе SQL. При добавлении | все кавычки " экранируются как ""; при удалении | двойные кавычки "" заменяются обратно на ".
- Добавлена интерактивная справка для Python выражений: кнопка "Show Expression Help" появляется при наведении курсора на кнопку "Add column by python expression" и автоматически скрывается через 2 секунды после ухода курсора.

## For Developers

### Quick Start
1. Clone the repository
2. Install dependencies: `pip install -r requirements.txt`
3. Run the application: `python main.py`

### Project Structure
- `main.py` - Application entry point
- `ui_mainwindow.py` - Main window UI and logic
- `sql_query_page.py` - SQL query interface
- `python_page.py` - Python scripting interface
- `ai_page.py` - AI assistant interface
- `table_manager_dialog.py` - Table management
- `docs/` - Documentation and guides
